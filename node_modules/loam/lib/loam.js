!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("loam",[],t):"object"==typeof exports?exports.loam=t():e.loam=t()}(self,(function(){return(()=>{"use strict";var e={248:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e){return new Promise((function(t,n){var r=new o.GDALDataset({func:"GDALOpen",src:e,args:[]});return r.open().then((function(){return t(r)}),(function(e){return n(e)}))}))},t.rasterize=function(e,t){return new Promise((function(n,r){n(new o.GDALDataset({func:"GDALRasterize",src:e,args:t}))}))},t.initialize=function(e,t){return(0,r.initWorker)(e,t)},t.reset=function(){return(0,r.clearWorker)()},t.reproject=function(e,t,n){var o=new Float64Array(n.map((function(e){return e[0]}))),a=new Float64Array(n.map((function(e){return e[1]})));return(0,r.runOnWorker)("LoamReproject",[e,t,o,a])};var r=n(384),o=n(33)},33:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GDALDataset=t.DatasetOperation=void 0;var r=n(384);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(t,n){a(this,e),this.func=t,this.args=n};t.DatasetOperation=i;var c=function(){function e(t,n){a(this,e),this.source=t,n&&n.length>0?this.operations=n:this.operations=[]}var t,n;return t=e,(n=[{key:"open",value:function(){return(0,r.accessFromDataset)(void 0,this)}},{key:"bytes",value:function(){return(0,r.accessFromDataset)("LoamReadBytes",this)}},{key:"count",value:function(){return(0,r.accessFromDataset)("GDALGetRasterCount",this)}},{key:"width",value:function(){return(0,r.accessFromDataset)("GDALGetRasterXSize",this)}},{key:"height",value:function(){return(0,r.accessFromDataset)("GDALGetRasterYSize",this)}},{key:"wkt",value:function(){return(0,r.accessFromDataset)("GDALGetProjectionRef",this)}},{key:"transform",value:function(){return(0,r.accessFromDataset)("GDALGetGeoTransform",this)}},{key:"convert",value:function(t){var n=this;return new Promise((function(r,o){r(new e(n.source,n.operations.concat(new i("GDALTranslate",t))))}))}},{key:"warp",value:function(t){var n=this;return new Promise((function(r,o){r(new e(n.source,n.operations.concat(new i("GDALWarp",t))))}))}},{key:"render",value:function(t,n,r){var o=this;return new Promise((function(a,c){var s=[t,r].concat(n);a(new e(o.source,o.operations.concat(new i("GDALDEMProcessing",s))))}))}},{key:"close",value:function(){return new Promise((function(e,t){console.warn("It is not necessary to call close() on a Loam dataset. This is a no-op"),e([])}))}}])&&o(t.prototype,n),e}();t.GDALDataset=c},579:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(248),o=n(33),a={open:r.open,rasterize:r.rasterize,GDALDataset:o.GDALDataset,initialize:r.initialize,reset:r.reset,reproject:r.reproject};t.default=a,e.exports=t.default},925:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0123456789abcdefghijklmnopqrstuvwxyz",n="",r=e;r>0;r--)n+=t[Math.floor(Math.random()*t.length)];return n},e.exports=t.default},384:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initWorker=p,t.clearWorker=function(){return new Promise((function(e){void 0!==c?c.then((function(e){e.terminate()})).finally((function(){c=void 0,e()})):e()}))},t.accessFromDataset=function(e,t){return d({accessor:e,dataset:t})},t.runOnWorker=function(e,t){return d({func:e,args:t})};var r,o=(r=n(925))&&r.__esModule?r:{default:r};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c,s={},u=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r="{\n            // Set up most of Module, and the rest of the worker communication logic.\n            importScripts('".concat(t,"' + 'loam-worker.js');\n            // Add locateFile that directs to gdalPrefix\n            self.Module.locateFile = function(path) {\n                return '").concat(n,"' + path;\n            };\n            // Load gdal.js. This will populate the Module object, and then call\n            // Module.onRuntimeInitialized() when it is ready for user code to interact with it.\n            importScripts('").concat(n,"' + 'gdal.js');\n        }"),o=new Blob([r],{type:"application/javascript"});return new Worker(URL.createObjectURL(o))},f=document.getElementsByTagName("script"),l=f[f.length-1];function p(e,t){var n=l.src.substring(0,l.src.lastIndexOf("/"))+"/";return e=void 0!==e?new URL(e,n).href:n,t=void 0!==t?new URL(t,n).href:e,void 0===c&&(c=new Promise((function(n,r){var o=new u(e,t);o.onmessage=function(e){o.onmessage=function(e){e.data.success?s[e.data.id][0](e.data.result):s[e.data.id][1](new Error(e.data.message)),delete s[e.data.id]},o.onerror=null,n(o)},o.onerror=function(e){e.preventDefault(),console.error(e),o.terminate(),r(e)}}))),c}function d(e){return p().then((function(t){return new Promise((function(n,r){var c=function(e,t){for(var a=(0,o.default)();s.hasOwnProperty(a);)a=(0,o.default)();return s[a]=[function(e){return n(e)},function(e){return r(e)}],a}();t.postMessage(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:c},e))}))}))}}},t={};return function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(579)})()}));